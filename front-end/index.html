<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>文献处理平台</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div id="container">

    <div id="left">
        <button class="btn" id="api" onclick="showAPIPopup()">
            <div class="icon api-icon" style="--icon-normal: url('content/API.svg'); --icon-active: url('content/API-active.svg')"></div>
            <span class="text">API</span>
        </button><br>
        <button class="btn" id="uploadArea" onclick="handleFileUpload()">
            <div class="icon upload-icon" style="--icon-normal: url('content/upload.svg'); --icon-active: url('content/upload-active.svg')"></div>
            <span class="text">上传文件</span>
        </button><br>
        <input type="file" id="fileInput" style="display: none;" multiple>
        <button class="btn" id="fieldsIn" onclick="showFieldsIn()">
            <div class="icon field-icon" style="--icon-normal: url('content/field.svg'); --icon-active: url('content/field-active.svg')"></div>
            <span class="text">添加字段</span>
        </button><br>
        <button class="btn disabled" id="runBtn">
            <div class="icon run-icon" style="--icon-disabled: url('content/run-disable.svg'); --icon-normal: url('content/run.svg'); --icon-active: url('content/run-active.svg')"></div>
            <span class="text">运行处理</span>
        </button><br>
        <button class="btn disabled" id="resultBtn">
            <div class="icon result-icon" style="--icon-disabled: url('content/result-disable.svg'); --icon-normal: url('content/result.svg'); --icon-active: url('content/result-active.svg')"></div>
            <span class="text">查看结果</span>
        </button><br>
        <button class="btn disabled" id="downloadBtn">
            <div class="icon download-icon" style="--icon-disabled: url('content/download-disable.svg'); --icon-normal: url('content/download.svg'); --icon-active: url('content/download-active.svg')"></div>
            <span class="text">下载表格</span>
        </button>
    </div>

    <div id="right">
        <image src="content/start.png" alt="文献处理平台 Logo" id="logo">
        <!-- API 配置弹窗 -->
        <div id="api-popup" style="display: none">
            <button id="close-api-popup" class="close-button" style="position: absolute; top: 10px; right: 10px;"></button>
            <div id="apiTypeArea">
                <label for="apiTypeInput" style="margin-right: 10px;">API 类型</label>
                <select id="apiTypeInput">
                    <option value="Moonshot">Moonshot</option>
                    <option value="OpenAI">OpenAI</option>
                </select>
            </div>
            <div id="apiHostArea">
                <label for="apiHostInput" style="margin-right: 10px;">API 主机</label>
                <input type="url" id="apiHostInput" placeholder="请输入API主机" />
            </div>
            <div id="apiKeyArea">
                <label for="apiKeyInput" style="margin-right: 10px;">API 密钥</label>
                <input type="text" id="apiKeyInput" placeholder="请输入API密钥" />
            </div>
            <button class="test-button" onclick="testConnection()">测试连接</button>
            <div id="msg"></div>
        </div>
        <!-- 文件列表 -->
        <div id="fileList" class="file-list" ></div>
        <!-- 字段选择区域 -->
        <div class="headers-container" id="headersContainer" style="display: none">
            <button id="close-fields-popup" class="close-button" style="position: fixed; top: 10px; right: 10px;">×</button>
            <div class="headers-list"></div>
            <button type="button" class="add-header-btn" id="addHeaderBtn" title="添加表头"></button>
        </div>

        <!-- 结果表格 -->
        <table id="result-table" style="display: none;"></table>
    </div>

</div>
<script src="main.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        updateButtonStates();
    });
</script>
</body>
</html>